<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>V√†o game b·∫±ng key</title>
<style>
  body, html {
    margin: 0; padding: 0; height: 100%;
    background: #010;
    color: #afa;
    font-family: 'Arial', sans-serif;
    overflow-x: hidden;
  }
  #bgCanvas {
    position: fixed;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 0;
    pointer-events: none;
    background: #010;
  }
  #mainContainer {
    position: relative;
    z-index: 10;
    max-width: 600px;
    margin: 30px auto;
    padding: 20px;
    background: #001100cc;
    border-radius: 12px;
    box-shadow: 0 0 15px #0f0;
  }
  h2.animated-text, h3.animated-text {
    animation: glow 2s ease-in-out infinite alternate;
    text-align: center;
    user-select: none;
  }
  @keyframes glow {
    from {
      text-shadow:
        0 0 5px #0f0,
        0 0 10px #0f0,
        0 0 20px #0f0,
        0 0 30px #0f0;
    }
    to {
      text-shadow:
        0 0 10px #0f0,
        0 0 20px #0f0,
        0 0 40px #0f0,
        0 0 60px #0f0;
    }
  }
  input[type="text"] {
    width: 100%;
    padding: 12px;
    font-size: 18px;
    border: 2px solid #0f0;
    border-radius: 8px;
    background: #002200;
    color: #afa;
    box-sizing: border-box;
  }
  button {
    margin-top: 15px;
    width: 100%;
    padding: 12px;
    font-size: 18px;
    font-weight: bold;
    border-radius: 10px;
    border: 2px solid #0f0;
    background: linear-gradient(45deg, #004400, #008800);
    color: #afa;
    cursor: pointer;
    box-shadow:
      0 0 8px #0f0,
      inset 0 0 8px #0f0;
    transition: all 0.3s ease;
  }
  button:hover {
    background: linear-gradient(45deg, #00aa00, #00ff00);
    color: #000;
    box-shadow:
      0 0 15px #0f0,
      inset 0 0 15px #0f0;
  }
  #status {
    margin-top: 20px;
    font-size: 18px;
    font-weight: bold;
    user-select: none;
  }
  #expirationTimer {
    margin-top: 8px;
    font-size: 16px;
    font-weight: bold;
    color: #0f0;
    text-shadow: 0 0 8px #0f0;
    user-select: none;
  }
  #gameMenu {
    margin-top: 25px;
    display: none;
    text-align: center;
  }
  #gameMenu button {
    width: 45px;
    height: 45px;
    margin: 5px;
    border-radius: 8px;
    border: 2px solid #0f0;
    background: linear-gradient(45deg, #004400, #008800);
    color: #afa;
    font-weight: bold;
    cursor: pointer;
    box-shadow:
      0 0 8px #0f0,
      inset 0 0 8px #0f0;
    transition: all 0.3s ease;
  }
  #gameMenu button:hover {
    background: linear-gradient(45deg, #00aa00, #00ff00);
    color: #000;
    box-shadow:
      0 0 15px #0f0,
      inset 0 0 15px #0f0;
  }
  #gameContent {
    margin-top: 20px;
    display: none;
    background: #002200cc;
    padding: 15px;
    border-radius: 12px;
    box-shadow: 0 0 15px #0f0;
  }
  .game-div {
    display: none;
    font-size: 16px;
  }
  #backToMenuBtn {
    margin-top: 15px;
    width: auto;
    padding: 10px 20px;
  }
  #note {
    margin-top: 25px;
    background: #003300cc;
    border: 2px solid #0f0;
    padding: 10px;
    border-radius: 10px;
    font-weight: bold;
    user-select: none;
  }
  #topLeftMenu {
    position: fixed;
    top: 10px;
    left: 10px;
    z-index: 20;
  }
  #adminContact {
    display: none;
    margin-top: 8px;
    background: #003300cc;
    border: 2px solid #0f0;
    border-radius: 8px;
    padding: 10px;
    max-width: 200px;
    user-select: none;
  }
  #adminContact a {
    display: block;
    color: #0f0;
    text-decoration: none;
    margin-bottom: 5px;
  }
  #adminContact a:hover {
    text-decoration: underline;
  }
  .led-button {
    background: #000;
    color: #0f0;
    border: 2px solid #0f0;
    border-radius: 6px;
    box-shadow:
      0 0 8px #0f0,
      inset 0 0 8px #0f0;
    cursor: pointer;
    margin: 5px 0;
    padding: 8px 12px;
    font-weight: bold;
  }
  .led-button:hover {
    background: #0f0;
    color: #000;
    box-shadow:
      0 0 15px #0f0,
      inset 0 0 15px #0f0;
  }
</style>
</head>
<body>

<canvas id="bgCanvas"></canvas>

<div id="topLeftMenu">
  <button class="led-button" id="toggleAdminBtn">‚ò∞ Menu Admin</button>
  <div id="adminContact">
    <a href="https://facebook.com/admin1" target="_blank" rel="noopener">Admin 1 (Facebook)</a>
    <a href="https://facebook.com/admin2" target="_blank" rel="noopener">Admin 2 (Facebook)</a>
    <a href="https://facebook.com/admin3" target="_blank" rel="noopener">Admin 3 (Facebook)</a>
  </div>
</div>

<div id="mainContainer">
  <h2 class="animated-text">üéÆ V√†o game b·∫±ng key</h2>

  <input type="text" id="userKey" placeholder="Nh·∫≠p key b·∫°n c√≥..." autocomplete="off" />
  <button id="checkKeyBtn">‚úÖ Ki·ªÉm tra key</button>
  <p id="status"></p>
  <p id="expirationTimer"></p>

  <div id="gameMenu">
    <h3 class="animated-text">Ch·ªçn game b·∫°n mu·ªën ch∆°i</h3>
    <div>
      <button onclick="openGame(1)">1</button>
      <button onclick="openGame(2)">2</button>
      <button onclick="openGame(3)">3</button>
      <button onclick="openGame(4)">4</button>
      <button onclick="openGame(5)">5</button>
      <button onclick="openGame(6)">6</button>
      <button onclick="openGame(7)">7</button>
      <button onclick="openGame(8)">8</button>
      <button onclick="openGame(9)">9</button>
      <button onclick="openGame(10)">10</button>
    </div>
    <button id="logoutBtn">üö™ ƒêƒÉng xu·∫•t</button>
  </div>

  <div id="gameContent">
    <h3 class="animated-text" id="gameTitle"></h3>
    <div id="game1" class="game-div"><p>N·ªôi dung Game 1 ·ªü ƒë√¢y</p></div>
    <div id="game2" class="game-div"><p>N·ªôi dung Game 2 ·ªü ƒë√¢y</p></div>
    <div id="game3" class="game-div"><p>N·ªôi dung Game 3 ·ªü ƒë√¢y</p></div>
    <div id="game4" class="game-div"><p>N·ªôi dung Game 4 ·ªü ƒë√¢y</p></div>
    <div id="game5" class="game-div"><p>N·ªôi dung Game 5 ·ªü ƒë√¢y</p></div>
    <div id="game6" class="game-div"><p>N·ªôi dung Game 6 ·ªü ƒë√¢y</p></div>
    <div id="game7" class="game-div"><p>N·ªôi dung Game 7 ·ªü ƒë√¢y</p></div>
    <div id="game8" class="game-div"><p>N·ªôi dung Game 8 ·ªü ƒë√¢y</p></div>
    <div id="game9" class="game-div"><p>N·ªôi dung Game 9 ·ªü ƒë√¢y</p></div>
    <div id="game10" class="game-div"><p>N·ªôi dung Game 10 ·ªü ƒë√¢y</p></div>
    <button id="backToMenuBtn">‚¨ÖÔ∏è Quay l·∫°i menu</button>
  </div>

  <div id="note">
    ƒê√ÇY L√Ä TOOL ANH EM NH√Ä KV, KHUY·∫æN C√ÅO ANH EM ƒê·∫∂T C∆Ø·ª¢C √çT B·ªûI V√å TOOL KH√Å L·ªé N√äN ANH EM M·∫§T TI·ªÄN TH√å ƒê·ª™NG C√ì S·ª¶A ·∫≤NGGG !!!!!!!!
  </div>
</div>

<script>
  // URL keys.json c·ªßa b·∫°n tr√™n Github
  const githubKeysUrl = "https://raw.githubusercontent.com/adminvienkey26109/trinhngocvientx/main/keys.json";

  const userKeyInput = document.getElementById("userKey");
  const status = document.getElementById("status");
  const expirationTimer = document.getElementById("expirationTimer");
  const checkKeyBtn = document.getElementById("checkKeyBtn");
  const gameMenu = document.getElementById("gameMenu");
  const logoutBtn = document.getElementById("logoutBtn");
  const gameContent = document.getElementById("gameContent");
  const gameTitle = document.getElementById("gameTitle");
  const backToMenuBtn = document.getElementById("backToMenuBtn");
  const adminContact = document.getElementById("adminContact");
  const toggleAdminBtn = document.getElementById("toggleAdminBtn");

  let keysData = null;
  let currentKeyData = null;
  let expirationInterval = null;

  // Hi·ªáu ·ª©ng canvas n·ªÅn
  const canvas = document.getElementById('bgCanvas');
  const ctx = canvas.getContext('2d');
  let width, height;
  function resize() {
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  // Hi·ªáu ·ª©ng ƒëi·ªÉm s√°ng random
  const points = [];
  for(let i=0; i<50; i++){
    points.push({
      x: Math.random()*width,
      y: Math.random()*height,
      vx: (Math.random()-0.5)*0.5,
      vy: (Math.random()-0.5)*0.5,
      radius: Math.random()*2 + 1
    });
  }
  function animate() {
    ctx.clearRect(0, 0, width, height);
    points.forEach(p => {
      p.x += p.vx;
      p.y += p.vy;
      if(p.x < 0 || p.x > width) p.vx = -p.vx;
      if(p.y < 0 || p.y > height) p.vy = -p.vy;
      ctx.beginPath();
      ctx.fillStyle = 'rgba(0,255,0,0.6)';
      ctx.shadowColor = '#0f0';
      ctx.shadowBlur = 10;
      ctx.arc(p.x, p.y, p.radius, 0, Math.PI*2);
      ctx.fill();
    });
    requestAnimationFrame(animate);
  }
  animate();

  toggleAdminBtn.onclick = () => {
    adminContact.style.display = adminContact.style.display === 'block' ? 'none' : 'block';
  };

  function showStatus(msg, isError = false) {
    status.textContent = msg;
    status.style.color = isError ? '#f00' : '#0f0';
  }

  function startExpirationCountdown(expirationISO) {
    if (expirationInterval) clearInterval(expirationInterval);
    function updateTimer() {
      const now = new Date();
      const expireTime = new Date(expirationISO);
      const diff = expireTime - now;
      if(diff <= 0){
        expirationTimer.textContent = "Key ƒë√£ h·∫øt h·∫°n!";
        showStatus("Key ƒë√£ h·∫øt h·∫°n!", true);
        logout();
        clearInterval(expirationInterval);
        return;
      }
      const hrs = Math.floor(diff / 3600000);
      const mins = Math.floor((diff % 3600000) / 60000);
      const secs = Math.floor((diff % 60000) / 1000);
      expirationTimer.textContent = `Th·ªùi gian c√≤n l·∫°i: ${hrs} gi·ªù ${mins} ph√∫t ${secs} gi√¢y`;
    }
    updateTimer();
    expirationInterval = setInterval(updateTimer, 1000);
  }

  function logout() {
    currentKeyData = null;
    userKeyInput.value = '';
    gameMenu.style.display = 'none';
    gameContent.style.display = 'none';
    expirationTimer.textContent = '';
    showStatus("B·∫°n ƒë√£ ƒëƒÉng xu·∫•t!");
  }

  logoutBtn.onclick = logout;

  backToMenuBtn.onclick = () => {
    gameContent.style.display = 'none';
    gameMenu.style.display = 'block';
  };

  function openGame(num) {
    gameTitle.textContent = `Game s·ªë ${num}`;
    document.querySelectorAll('.game-div').forEach(div => div.style.display = 'none');
    const gameDiv = document.getElementById('game'+num);
    if(gameDiv) gameDiv.style.display = 'block';
    gameMenu.style.display = 'none';
    gameContent.style.display = 'block';
  }

  checkKeyBtn.onclick = () => {
    const inputKey = userKeyInput.value.trim();
    if (!inputKey) {
      showStatus("Vui l√≤ng nh·∫≠p key!");
      return;
    }
    if (!keysData) {
      showStatus("ƒêang t·∫£i d·ªØ li·ªáu key, vui l√≤ng th·ª≠ l·∫°i sau...", true);
      return;
    }
    // T√¨m key
    const found = keysData.find(k => k.key === inputKey);
    if (!found) {
      showStatus("Key kh√¥ng h·ª£p l·ªá!", true);
      return;
    }
    // Ki·ªÉm tra h·∫øt h·∫°n
    if (found.expiresAt) {
      const expireDate = new Date(found.expiresAt);
      if (expireDate < new Date()) {
        showStatus("Key ƒë√£ h·∫øt h·∫°n!", true);
        return;
      }
      startExpirationCountdown(found.expiresAt);
    } else {
      expirationTimer.textContent = "";
    }
    currentKeyData = found;
    showStatus("Key h·ª£p l·ªá! B·∫°n c√≥ th·ªÉ v√†o game.");
    gameMenu.style.display = 'block';
  };

  // T·∫£i keys.json t·ª´ github
  fetch(githubKeysUrl)
    .then(res => {
      if(!res.ok) throw new Error("Kh√¥ng th·ªÉ t·∫£i keys.json");
      return res.json();
    })
    .then(data => {
      keysData = data;
      showStatus("ƒê√£ t·∫£i danh s√°ch key. Vui l√≤ng nh·∫≠p key ƒë·ªÉ ki·ªÉm tra.");
    })
    .catch(e => {
      showStatus("L·ªói t·∫£i key: " + e.message, true);
    });

</script>

</body>
</html>
