<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>üéÆ V√†o game b·∫±ng key</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron&display=swap');

    /* Reset & chung */
    body {
      font-family: 'Arial', sans-serif;
      max-width: 700px;
      margin: 30px auto;
      text-align: center;
      background: url('https://i.imgur.com/NQ5PcTl.png') no-repeat center/cover; /* Logo n·ªÅn v√≠ d·ª• */
      color: #0f0;
      text-shadow:
        0 0 5px #0f0,
        0 0 10px #0f0,
        0 0 20px #0f0,
        0 0 40px #0f0;
    }

    /* Hi·ªáu ·ª©ng ch·ªØ led ng·ªçc l·ª•c b·∫£o */
    .led-text {
      font-family: 'Orbitron', monospace;
      font-weight: 700;
      font-size: 1.2rem;
      color: #0f0;
      text-shadow:
        0 0 5px #0f0,
        0 0 10px #0f0,
        0 0 20px #0f0,
        0 0 40px #0f0;
      animation: ledGlow 2s infinite alternate;
    }
    @keyframes ledGlow {
      from {
        text-shadow:
          0 0 5px #0f0,
          0 0 10px #0f0,
          0 0 20px #0f0,
          0 0 40px #0f0;
      }
      to {
        text-shadow:
          0 0 10px #5aff9a,
          0 0 20px #5aff9a,
          0 0 30px #5aff9a,
          0 0 50px #5aff9a;
      }
    }

    input[type=text] {
      padding: 10px;
      width: 80%;
      font-size: 16px;
      border: 2px solid #0f0;
      border-radius: 6px;
      background: #000;
      color: #0f0;
      box-shadow:
        0 0 5px #0f0,
        inset 0 0 8px #0f0;
    }

    button {
      padding: 10px 25px;
      font-size: 16px;
      margin-top: 10px;
      cursor: pointer;
      background: #000;
      color: #0f0;
      border: 2px solid #0f0;
      border-radius: 8px;
      box-shadow:
        0 0 10px #0f0,
        inset 0 0 8px #0f0;
      transition: 0.3s;
      text-transform: uppercase;
      font-weight: bold;
      letter-spacing: 1.5px;
    }
    button:hover {
      box-shadow:
        0 0 20px #5aff9a,
        inset 0 0 12px #5aff9a;
      color: #5aff9a;
      border-color: #5aff9a;
    }

    #status {
      margin-top: 20px;
      font-weight: bold;
      min-height: 30px;
    }

    #gameMenu {
      margin-top: 30px;
      display: none;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
    }

    .game-btn {
      background: #000;
      border: 2px solid #0f0;
      border-radius: 8px;
      color: #0f0;
      padding: 15px 25px;
      cursor: pointer;
      min-width: 80px;
      font-weight: bold;
      font-size: 18px;
      box-shadow:
        0 0 10px #0f0,
        inset 0 0 8px #0f0;
      transition: 0.3s;
      user-select: none;
      position: relative;
      text-shadow:
        0 0 5px #0f0,
        0 0 10px #0f0;
    }
    .game-btn:hover {
      color: #5aff9a;
      border-color: #5aff9a;
      box-shadow:
        0 0 20px #5aff9a,
        inset 0 0 12px #5aff9a;
      text-shadow:
        0 0 10px #5aff9a,
        0 0 20px #5aff9a;
    }

    #logoutBtn {
      margin-top: 30px;
      background: #000;
      border: 2px solid #0f0;
      border-radius: 8px;
      color: #0f0;
      padding: 12px 30px;
      font-weight: bold;
      cursor: pointer;
      box-shadow:
        0 0 10px #0f0,
        inset 0 0 8px #0f0;
      transition: 0.3s;
      user-select: none;
    }
    #logoutBtn:hover {
      color: #5aff9a;
      border-color: #5aff9a;
      box-shadow:
        0 0 20px #5aff9a,
        inset 0 0 12px #5aff9a;
    }

    #noteOutside, #noteInside {
      margin-top: 20px;
      color: #0f0;
      font-weight: bold;
      background: rgba(0,0,0,0.7);
      padding: 10px;
      border: 2px solid #0f0;
      border-radius: 8px;
      text-shadow:
        0 0 5px #0f0;
      user-select: none;
    }

    /* G√≥c tr√™n tr√°i n√∫t menu */
    #menuToggleBtn {
      position: fixed;
      top: 15px;
      left: 15px;
      z-index: 9999;
      background: #000;
      border: 2px solid #0f0;
      border-radius: 8px;
      padding: 10px 15px;
      cursor: pointer;
      color: #0f0;
      font-weight: bold;
      box-shadow:
        0 0 10px #0f0,
        inset 0 0 8px #0f0;
      transition: 0.3s;
      user-select: none;
    }
    #menuToggleBtn:hover {
      color: #5aff9a;
      border-color: #5aff9a;
      box-shadow:
        0 0 20px #5aff9a,
        inset 0 0 12px #5aff9a;
    }

    #adminLinks {
      position: fixed;
      top: 60px;
      left: 15px;
      background: rgba(0,0,0,0.8);
      border: 2px solid #0f0;
      border-radius: 8px;
      padding: 10px;
      display: none;
      z-index: 9998;
      text-align: left;
      min-width: 180px;
    }
    #adminLinks a {
      display: block;
      color: #0f0;
      text-decoration: none;
      font-weight: bold;
      margin-bottom: 8px;
      text-shadow:
        0 0 5px #0f0;
      transition: 0.3s;
    }
    #adminLinks a:hover {
      color: #5aff9a;
      text-shadow:
        0 0 10px #5aff9a;
    }

    /* Hi·ªáu ·ª©ng vi·ªÅn LED ch·ªØ ƒë·∫øm ng∆∞·ª£c */
    #countdown {
      font-size: 1.1rem;
      font-weight: bold;
      margin-top: 10px;
      color: #0f0;
      text-shadow:
        0 0 7px #0f0,
        0 0 14px #0f0,
        0 0 21px #0f0,
        0 0 28px #5aff9a,
        0 0 35px #5aff9a,
        0 0 42px #5aff9a;
      animation: ledGlow 2s infinite alternate;
      user-select: none;
    }
  </style>
</head>
<body>

  <button id="menuToggleBtn" title="Li√™n h·ªá Admin">‚ò∞ Menu</button>
  <div id="adminLinks">
    <a href="https://facebook.com/admin1" target="_blank" rel="noopener noreferrer">Facebook Admin 1</a>
    <a href="https://facebook.com/admin2" target="_blank" rel="noopener noreferrer">Facebook Admin 2</a>
    <a href="https://facebook.com/admin3" target="_blank" rel="noopener noreferrer">Facebook Admin 3</a>
  </div>

  <h2 class="led-text">üéÆ V√†o game b·∫±ng key</h2>

  <div id="loginArea">
    <input type="text" id="userKey" placeholder="Nh·∫≠p key b·∫°n c√≥..." autocomplete="off" /><br />
    <button onclick="checkKey()">‚úÖ Ki·ªÉm tra key</button>
    <p id="status"></p>
    <div id="noteOutside" class="led-text">
      ƒê√ÇY L√Ä TOOL ANH EM NH√Ä KV, KHUY·∫æN C√ÅO ANH EM ƒê·∫∂T C∆Ø·ª¢C √çT B·ªûI V√å TOOL KH√Å L·ªé N√äN ANH EM M·∫§T TI·ªÄN TH√å ƒê·ª™NG C√ì S·ª¶A ·∫≤NGGG !!!!!!!!
    </div>
  </div>

  <div id="gameMenu">
    <div class="led-text" id="welcomeMsg"></div>
    <div id="countdown"></div>
    <p id="noteInside" class="led-text">
      L·ª±a ch·ªçn game b·∫°n mu·ªën ch∆°i (1-10)
    </p>
    <div id="buttonsContainer"></div>
    <button id="logoutBtn" onclick="logout()">üö™ ƒêƒÉng xu·∫•t</button>
  </div>

  <script>
    const repoKeysUrl = "https://raw.githubusercontent.com/adminvienkey26109/trinhngocvientx/main/keys.json";

    const adminLinksBtn = document.getElementById("menuToggleBtn");
    const adminLinksDiv = document.getElementById("adminLinks");

    // Toggle hi·ªÉn th·ªã li√™n h·ªá admin
    adminLinksBtn.addEventListener("click", () => {
      adminLinksDiv.style.display = adminLinksDiv.style.display === "block" ? "none" : "block";
    });

    // Hi·ªÉn th·ªã n√∫t game 1-10
    function createGameButtons() {
      const container = document.getElementById("buttonsContainer");
      container.innerHTML = "";
      for(let i=1; i<=10; i++) {
        const btn = document.createElement("button");
        btn.textContent = `Game ${i}`;
        btn.className = "game-btn led-text";
        btn.onclick = () => alert(`B·∫°n ch·ªçn Game ${i} (ch∆∞a c√≥ ch·ª©c nƒÉng th·ª±c t·∫ø)`); // Thay b·∫±ng chuy·ªÉn trang ho·∫∑c code game th·∫≠t
        container.appendChild(btn);
      }
    }

    // Hi·ªÉn th·ªã ƒë·∫øm ng∆∞·ª£c th·ªùi gian h·∫øt h·∫°n
    function startCountdown(expiryISO) {
      const countdownElem = document.getElementById("countdown");
      function update() {
        const now = new Date();
        const expiry = new Date(expiryISO);
        const diff = expiry - now;
        if(diff <= 0) {
          countdownElem.textContent = "Key ƒë√£ h·∫øt h·∫°n! B·∫°n s·∫Ω b·ªã ƒëƒÉng xu·∫•t.";
          countdownElem.style.color = "#f00";
          logout();
          return;
        }
        const days = Math.floor(diff / (1000*60*60*24));
        const hours = Math.floor((diff / (1000*60*60)) % 24);
        const minutes = Math.floor((diff / (1000*60)) % 60);
        const seconds = Math.floor((diff / 1000) % 60);

        countdownElem.textContent = `‚è≥ Key c√≤n h·∫°n: ${days} ng√†y ${hours} gi·ªù ${minutes} ph√∫t ${seconds} gi√¢y`;
      }
      update();
      return setInterval(update, 1000);
    }

    // Ki·ªÉm tra key h·ª£p l·ªá & ch∆∞a h·∫øt h·∫°n
    async function checkKey() {
      const inputKey = document.getElementById("userKey").value.trim();
      const status = document.getElementById("status");
      if(!inputKey) {
        status.style.color = "#f00";
        status.textContent = "‚ùå Vui l√≤ng nh·∫≠p key.";
        return;
      }
      status.style.color = "#0f0";
      status.textContent = "üîÑ ƒêang ki·ªÉm tra key...";

      try {
        const res = await fetch(repoKeysUrl + `?t=${Date.now()}`); // cache buster
        if(!res.ok) throw new Error("L·ªói fetch keys");
        const data = await res.json();

        // D·ªØ li·ªáu keys d·∫°ng: { keys: [ {key: "...", expiresAt:"2025-06-10T23:59:59Z"}, ... ] }
        // ho·∫∑c b·∫°n c√≥ th·ªÉ ƒëi·ªÅu ch·ªânh l·∫°i d·ªØ li·ªáu trong keys.json theo c·∫•u tr√∫c n√†y

        const found = data.keys.find(k => k.key === inputKey);

        if(found) {
          const now = new Date();
          const expiry = new Date(found.expiresAt);
          if(expiry <= now) {
            status.style.color = "#f00";
            status.textContent = "‚ùå Key ƒë√£ h·∫øt h·∫°n v√† b·ªã ban!";
            localStorage.removeItem("savedKey");
            return;
          }
          status.style.color = "green";
          status.textContent = "‚úÖ Key h·ª£p l·ªá! ƒêang chuy·ªÉn h∆∞·ªõng...";

          // L∆∞u key localStorage ƒë·ªÉ l·∫ßn sau kh√¥ng c·∫ßn nh·∫≠p
          localStorage.setItem("savedKey", inputKey);

          // Hi·ªÉn th·ªã menu game
          enterGame(found);

        } else {
          status.style.color = "#f00";
          status.textContent = "‚ùå Key kh√¥ng h·ª£p l·ªá.";
          localStorage.removeItem("savedKey");
        }

      } catch (e) {
        status.style.color = "#f00";
        status.textContent = "‚ùå L·ªói khi ki·ªÉm tra key.";
        console.error(e);
      }
    }

    // Hi·ªÉn th·ªã menu game, ·∫©n login area
    let countdownInterval = null;
    function enterGame(keyObj) {
      document.getElementById("loginArea").style.display = "none";
      document.getElementById("gameMenu").style.display = "flex";
      createGameButtons();
      document.getElementById("welcomeMsg").textContent = `üéâ Ch√†o m·ª´ng b·∫°n! Key: ${keyObj.key}`;
      if(countdownInterval) clearInterval(countdownInterval);
      countdownInterval = startCountdown(keyObj.expiresAt);
    }

    // ƒêƒÉng xu·∫•t
    function logout() {
      localStorage.removeItem("savedKey");
      if(countdownInterval) clearInterval(countdownInterval);
      document.getElementById("gameMenu").style.display = "none";
      document.getElementById("loginArea").style.display = "block";
      document.getElementById("status").textContent = "";
      document.getElementById("userKey").value = "";
    }

    // T·ª± ƒë·ªông ƒëƒÉng nh·∫≠p n·∫øu c√≥ key trong localStorage
    async function tryAutoLogin() {
      const savedKey = localStorage.getItem("savedKey");
      if(savedKey) {
        document.getElementById("userKey").value = savedKey;
        // L·∫∑p l·∫°i logic checkKey nh∆∞ng kh√¥ng ƒë·ªïi status text, ch·ªâ hi·ªán menu ho·∫∑c logout
        try {
          const res = await fetch(repoKeysUrl + `?t=${Date.now()}`);
          if(!res.ok) throw new Error("L·ªói fetch keys");
          const data = await res.json();
          const found = data.keys.find(k => k.key === savedKey);
          if(found && new Date(found.expiresAt) > new Date()) {
            enterGame(found);
          } else {
            logout();
          }
        } catch {
          logout();
        }
      }
    }

    tryAutoLogin();

  </script>
</body>
  </html>
