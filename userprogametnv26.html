<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Nh·∫≠p key ƒë·ªÉ v√†o game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 30px auto;
      text-align: center;
      background: url('https://i.imgur.com/1JdFvXb.jpg') no-repeat center center fixed;
      background-size: cover;
      color: white;
    }
    input {
      padding: 10px;
      width: 80%;
      font-size: 16px;
      border-radius: 6px;
      border: none;
      margin-bottom: 10px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin: 5px;
      cursor: pointer;
      border-radius: 6px;
      border: 2px solid #1abc9c;
      background: transparent;
      color: #1abc9c;
      font-weight: bold;
      transition: all 0.3s ease;
      text-shadow: 0 0 5px #1abc9c;
    }
    button:hover {
      background-color: #1abc9c;
      color: #fff;
      text-shadow: none;
      box-shadow: 0 0 8px #16a085;
    }
    #status {
      margin-top: 20px;
      font-weight: bold;
      font-size: 18px;
      text-shadow: 0 0 5px #000;
    }
    #gameMenu {
      margin-top: 30px;
      display: none;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }
    .game-btn {
      border: 2px solid #1abc9c;
      color: #1abc9c;
      padding: 10px 15px;
      border-radius: 10px;
      font-weight: bold;
      width: 100px;
      box-shadow: 0 0 8px #16a085;
      cursor: pointer;
      transition: 0.3s;
      user-select: none;
      position: relative;
      overflow: hidden;
    }
    .game-btn::before {
      content: '';
      position: absolute;
      width: 150%;
      height: 150%;
      background: linear-gradient(45deg, transparent, #1abc9c, transparent);
      animation: ledEffect 3s linear infinite;
      top: -50%;
      left: -50%;
      opacity: 0.6;
      border-radius: 10px;
      pointer-events: none;
      z-index: 0;
    }
    .game-btn span {
      position: relative;
      z-index: 1;
      text-shadow: 0 0 10px #1abc9c;
    }
    @keyframes ledEffect {
      0% {
        transform: rotate(0deg) translateX(-100%);
      }
      100% {
        transform: rotate(360deg) translateX(100%);
      }
    }
    #logoutBtn {
      margin-top: 15px;
      display: none;
      background-color: #e74c3c;
      border-color: #c0392b;
      color: white;
      box-shadow: none;
      text-shadow: none;
    }
    #logoutBtn:hover {
      background-color: #c0392b;
    }
    #adminMenuBtn {
      position: fixed;
      top: 15px;
      left: 15px;
      background: #1abc9c;
      border: none;
      border-radius: 6px;
      padding: 8px 12px;
      cursor: pointer;
      font-weight: bold;
      color: white;
      box-shadow: 0 0 10px #16a085;
      z-index: 1000;
    }
    #adminContacts {
      position: fixed;
      top: 50px;
      left: 15px;
      background: rgba(26, 188, 156, 0.9);
      border-radius: 10px;
      padding: 10px;
      display: none;
      z-index: 999;
      width: 200px;
      text-align: left;
      box-shadow: 0 0 15px #16a085;
    }
    #adminContacts a {
      display: block;
      color: white;
      margin: 5px 0;
      font-weight: bold;
      text-decoration: none;
      text-shadow: 0 0 3px black;
    }
    #note {
      margin-top: 40px;
      font-size: 14px;
      background: rgba(0,0,0,0.5);
      padding: 15px;
      border-radius: 10px;
      line-height: 1.4;
      font-weight: bold;
      color: #f1c40f;
      text-shadow: 0 0 5px black;
      user-select: none;
    }
    .countdown {
      font-weight: bold;
      font-size: 20px;
      margin-top: 15px;
      color: #1abc9c;
      text-shadow: 0 0 10px #16a085;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%, 100% { text-shadow: 0 0 10px #16a085; }
      50% { text-shadow: 0 0 20px #1abc9c; }
    }
  </style>
</head>
<body>

<button id="adminMenuBtn" onclick="toggleAdminContacts()">Menu Admin</button>
<div id="adminContacts">
  <a href="https://facebook.com/admin1" target="_blank">Admin 1</a>
  <a href="https://facebook.com/admin2" target="_blank">Admin 2</a>
  <a href="https://facebook.com/admin3" target="_blank">Admin 3</a>
</div>

<h2>üéÆ V√†o game b·∫±ng key</h2>
<p>Nh·∫≠p key ƒë·ªÉ k√≠ch ho·∫°t, ho·∫∑c b·∫°n ƒë√£ ƒëƒÉng nh·∫≠p r·ªìi.</p>
<input type="text" id="userKey" placeholder="Nh·∫≠p key b·∫°n c√≥..."><br>
<button onclick="checkKey()">‚úÖ Ki·ªÉm tra key</button>
<p id="status"></p>

<!-- Game Menu -->
<div id="gameMenu" style="display:none;">
  <h3>Ch·ªçn tool b·∫°n mu·ªën d√πng:</h3>
  <div id="gamesButtons" style="display:flex; flex-wrap: wrap; justify-content:center;"></div>
  <p id="countdown" class="countdown"></p>
  <button id="logoutBtn" onclick="logout()">üö™ ƒêƒÉng xu·∫•t</button>
</div>

<!-- Note -->
<div id="note">
  ƒê√ÇY L√Ä TOOL ANH EM NH√Ä KV, KHUY·∫æN C√ÅO ANH EM ƒê·∫∂T C∆Ø·ª¢C √çT B·ªûI V√å TOOL KH√Å L·ªé N√äN ANH EM M·∫§T TI·ªÄN TH√å ƒê·ª™NG C√ì S·ª¶A ·∫≤NGGG !!!!!!!!
</div>

<script>
  const keysURL = "https://raw.githubusercontent.com/adminvienkey26109/trinhngocvientx/refs/heads/main/keys.json";

  const status = document.getElementById("status");
  const gameMenu = document.getElementById("gameMenu");
  const gamesButtons = document.getElementById("gamesButtons");
  const logoutBtn = document.getElementById("logoutBtn");
  const countdownElem = document.getElementById("countdown");
  const userKeyInput = document.getElementById("userKey");

  function toggleAdminContacts() {
    const cont = document.getElementById("adminContacts");
    cont.style.display = cont.style.display === "block" ? "none" : "block";
  }

  function showGameMenu(expireDate) {
    gameMenu.style.display = "flex";
    userKeyInput.style.display = "none";
    document.querySelector("button[onclick='checkKey()']").style.display = "none";
    logoutBtn.style.display = "inline-block";

    // Danh s√°ch tool link
    const toolPages = [
      "game1.html",
      "tool/tool2.html",
      "tool/tool3.html",
      "tool/tool4.html",
      "tool/tool5.html",
      "tool/tool6.html",
      "tool/tool7.html",
      "tool/tool8.html",
      "tool/tool9.html",
      "tool/tool10.html"
    ];

    gamesButtons.innerHTML = "";
    for (let i = 0; i < 10; i++) {
      const btn = document.createElement("button");
      btn.className = "game-btn";
      btn.innerHTML = `<span>Tool ${i+1}</span>`;
      btn.onclick = () => {
        window.location.href = toolPages[i];
      };
      gamesButtons.appendChild(btn);
    }

    if (expireDate) {
      startCountdown(new Date(expireDate));
    }
  }

  let countdownInterval;
  function startCountdown(expireDate) {
    clearInterval(countdownInterval);

    function updateCountdown() {
      const now = new Date();
      const diff = expireDate - now;

      if (diff <= 0) {
        clearInterval(countdownInterval);
        alert("‚è∞ Key c·ªßa b·∫°n ƒë√£ h·∫øt h·∫°n v√† b·ªã ban!");
        logout();
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      countdownElem.textContent = `Key h·∫øt h·∫°n sau: ${days} ng√†y ${hours} gi·ªù ${minutes} ph√∫t ${seconds} gi√¢y`;
    }

    updateCountdown();
    countdownInterval = setInterval(updateCountdown, 1000);
  }

  async function checkKey() {
    const inputKey = userKeyInput.value.trim();
    if (!inputKey) {
      status.style.color = "red";
      status.textContent = "‚ùå Vui l√≤ng nh·∫≠p key!";
      return;
    }

    status.textContent = "üîÑ ƒêang ki·ªÉm tra key...";
    status.style.color = "white";

    try {
      const res = await fetch(keysURL);
      const data = await res.json();

      if (!data.keys) throw new Error("D·ªØ li·ªáu keys kh√¥ng h·ª£p l·ªá");

      const keyObj = data.keys.find(k => k.key === inputKey);

      if (!keyObj) {
        status.style.color = "red";
        status.textContent = "‚ùå Key kh√¥ng h·ª£p l·ªá.";
        return;
      }

      if (keyObj.expiresAt) {
        const expireDate = new Date(keyObj.expiresAt);
        const now = new Date();
        if (expireDate < now) {
          status.style.color = "red";
          status.textContent = "‚ùå Key c·ªßa b·∫°n ƒë√£ h·∫øt h·∫°n v√† b·ªã ban!";
          return;
        }

        localStorage.setItem("userKey", inputKey);
        localStorage.setItem("keyExpire", keyObj.expiresAt);
        status.style.color = "green";
        status.textContent = "‚úÖ Key h·ª£p l·ªá! ƒêang chuy·ªÉn h∆∞·ªõng...";

        setTimeout(() => {
          showGameMenu(keyObj.expiresAt);
        }, 1000);

      } else {
        localStorage.setItem("userKey", inputKey);
        localStorage.removeItem("keyExpire");
        status.style.color = "green";
        status.textContent = "‚úÖ Key h·ª£p l·ªá! ƒêang chuy·ªÉn h∆∞·ªõng...";
        setTimeout(() => {
          showGameMenu(null);
        }, 1000);
      }

    } catch (e) {
      status.style.color = "red";
      status.textContent = "‚ùå L·ªói khi ki·ªÉm tra key.";
      console.error(e);
    }
  }

  function logout() {
    localStorage.removeItem("userKey");
    localStorage.removeItem("keyExpire");
    location.reload();
  }

  window.onload = () => {
    const savedKey = localStorage.getItem("userKey");
    const savedExpire = localStorage.getItem("keyExpire");

    if (savedKey) {
      if (savedExpire) {
        const expireDate = new Date(savedExpire);
        const now = new Date();
        if (expireDate < now) {
          alert("‚è∞ Key c·ªßa b·∫°n ƒë√£ h·∫øt h·∫°n v√† b·ªã ban!");
          logout();
          return;
        }
        showGameMenu(savedExpire);
      } else {
        showGameMenu(null);
      }
    }
  };
</script>
</body>
</html>
