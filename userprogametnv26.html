<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>V√†o game b·∫±ng key</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 30px auto;
      text-align: center;
      background: #001a00 url('https://i.imgur.com/4Z7M6Gz.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #ccffcc;
      position: relative;
    }

    input {
      padding: 10px;
      width: 80%;
      font-size: 16px;
      border: 2px solid #66ff99;
      border-radius: 6px;
      background: #002200;
      color: #ccffcc;
    }

    button, .led-button {
      padding: 12px 20px;
      width: 100%;
      max-width: 200px;
      font-size: 16px;
      margin: 10px auto;
      cursor: pointer;
      background: #003300;
      color: #66ff99;
      border: 2px solid #66ff99;
      border-radius: 8px;
      box-shadow: 0 0 8px #66ff99, inset 0 0 8px #66ff99;
      transition: 0.3s;
      font-weight: bold;
    }

    button:hover, .led-button:hover {
      background: #66ff99;
      color: #003300;
      box-shadow: 0 0 15px #66ff99, inset 0 0 15px #66ff99;
    }

    #status {
      margin-top: 20px;
      font-weight: bold;
    }

    #gameMenu button {
      width: 100px;
      height: 50px;
      margin: 8px;
      font-size: 18px;
      font-weight: bold;
    }

    #gameContent {
      margin-top: 20px;
    }

    .game-div {
      display: none;
      margin-top: 10px;
      border: 2px solid #66ff99;
      padding: 10px;
      border-radius: 8px;
      background: #002a00cc;
    }

    .animated-text {
      animation: glow 2s infinite alternate;
    }

    @keyframes glow {
      from {
        text-shadow: 0 0 5px #66ff99, 0 0 10px #66ff99, 0 0 20px #66ff99;
      }
      to {
        text-shadow: 0 0 10px #66ff99, 0 0 20px #66ff99, 0 0 30px #66ff99;
      }
    }

    #note {
      margin-top: 15px;
      font-size: 14px;
      color: #ccffcc;
      font-weight: bold;
      border: 2px solid #66ff99;
      padding: 10px;
      border-radius: 8px;
      background: #002a00cc;
    }

    #topLeftMenu {
      position: fixed;
      top: 10px;
      left: 10px;
    }

    #adminContact {
      display: none;
      margin-top: 10px;
      background: #003300cc;
      border: 2px solid #66ff99;
      border-radius: 6px;
      padding: 10px;
    }

    #adminContact a {
      display: block;
      color: #66ff99;
      text-decoration: none;
      margin: 5px 0;
    }

    #expirationTimer {
      font-weight: bold;
      margin-top: 10px;
      color: #66ff99;
      text-shadow: 0 0 8px #66ff99;
    }
  </style>
</head>
<body>

<!-- Menu li√™n h·ªá admin -->
<div id="topLeftMenu">
  <button class="led-button" id="toggleAdminBtn">‚ò∞ Menu Admin</button>
  <div id="adminContact">
    <a href="https://facebook.com/admin1" target="_blank">Admin 1 (Facebook)</a>
    <a href="https://facebook.com/admin2" target="_blank">Admin 2 (Facebook)</a>
    <a href="https://facebook.com/admin3" target="_blank">Admin 3 (Facebook)</a>
  </div>
</div>

<!-- Logo -->
<img src="https://i.imgur.com/mWG1aD2.png" alt="Logo" style="width: 120px; margin-bottom: 10px;" />

<h2 class="animated-text">üéÆ V√†o game b·∫±ng key</h2>

<!-- Nh·∫≠p key -->
<div id="keyInputSection">
  <input type="text" id="userKey" placeholder="Nh·∫≠p key b·∫°n c√≥..." autocomplete="off" />
  <br />
  <button onclick="checkKey()">‚úÖ Ki·ªÉm tra key</button>
  <p id="status"></p>
  <p id="expirationTimer"></p>
</div>

<!-- Menu ch·ªçn game -->
<div id="gameMenu" style="display:none;">
  <h3 class="animated-text">Ch·ªçn game b·∫°n mu·ªën ch∆°i</h3>
  <div>
    <button class="led-button" onclick="openGame(1)">1</button>
    <button class="led-button" onclick="openGame(2)">2</button>
    <button class="led-button" onclick="openGame(3)">3</button>
    <button class="led-button" onclick="openGame(4)">4</button>
    <button class="led-button" onclick="openGame(5)">5</button>
    <button class="led-button" onclick="openGame(6)">6</button>
    <button class="led-button" onclick="openGame(7)">7</button>
    <button class="led-button" onclick="openGame(8)">8</button>
    <button class="led-button" onclick="openGame(9)">9</button>
    <button class="led-button" onclick="openGame(10)">10</button>
  </div>
  <button class="led-button" onclick="logout()">üö™ ƒêƒÉng xu·∫•t</button>
</div>

<!-- Game content -->
<div id="gameContent" style="display:none;">
  <h3 class="animated-text" id="gameTitle"></h3>
  <div id="game1" class="game-div"><p>N·ªôi dung Game 1 ·ªü ƒë√¢y</p>game1.html</div>
  <div id="game2" class="game-div"><p>N·ªôi dung Game 2 ·ªü ƒë√¢y</p></div>
  <div id="game3" class="game-div"><p>N·ªôi dung Game 3 ·ªü ƒë√¢y</p></div>
  <div id="game4" class="game-div"><p>N·ªôi dung Game 4 ·ªü ƒë√¢y</p></div>
  <div id="game5" class="game-div"><p>N·ªôi dung Game 5 ·ªü ƒë√¢y</p></div>
  <div id="game6" class="game-div"><p>N·ªôi dung Game 6 ·ªü ƒë√¢y</p></div>
  <div id="game7" class="game-div"><p>N·ªôi dung Game 7 ·ªü ƒë√¢y</p></div>
  <div id="game8" class="game-div"><p>N·ªôi dung Game 8 ·ªü ƒë√¢y</p></div>
  <div id="game9" class="game-div"><p>N·ªôi dung Game 9 ·ªü ƒë√¢y</p></div>
  <div id="game10" class="game-div"><p>N·ªôi dung Game 10 ·ªü ƒë√¢y</p></div>
  <button class="led-button" id="backToMenuBtn">‚¨ÖÔ∏è Quay l·∫°i menu</button>
</div>

<!-- Ghi ch√∫ -->
<div id="note">
  ƒê√ÇY L√Ä TOOL ANH EM NH√Ä KV, KHUY·∫æN C√ÅO ANH EM ƒê·∫∂T C∆Ø·ª¢C √çT B·ªûI V√å TOOL KH√Å L·ªé N√äN ANH EM M·∫§T TI·ªÄN TH√å ƒê·ª™NG C√ì S·ª¶A ·∫≤NGGG !!!!!!!!
</div>

<!-- SCRIPT -->
<script>
  const githubKeysUrl = "https://raw.githubusercontent.com/adminvienkey26109/trinhngocvientx/main/keys.json";
  const userKeyInput = document.getElementById("userKey");
  const status = document.getElementById("status");
  const expirationTimer = document.getElementById("expirationTimer");
  const gameMenu = document.getElementById("gameMenu");
  const gameContent = document.getElementById("gameContent");
  const gameTitle = document.getElementById("gameTitle");
  const backToMenuBtn = document.getElementById("backToMenuBtn");
  const keyInputSection = document.getElementById("keyInputSection");
  const toggleAdminBtn = document.getElementById("toggleAdminBtn");
  const adminContact = document.getElementById("adminContact");

  let validKey = null;
  let keyExpiresAt = null;
  let countdownInterval = null;

  toggleAdminBtn.addEventListener("click", () => {
    adminContact.style.display = adminContact.style.display === "block" ? "none" : "block";
  });

  async function checkKey() {
    const inputKey = userKeyInput.value.trim();
    if (!inputKey) {
      status.textContent = "‚ùå Vui l√≤ng nh·∫≠p key.";
      status.style.color = "red";
      return;
    }

    status.textContent = "üîÑ ƒêang ki·ªÉm tra key...";
    status.style.color = "#66ff99";

    try {
      const res = await fetch(githubKeysUrl + "?t=" + Date.now());
      const data = await res.json();
      const found = data.keys.find(k => k.key === inputKey);

      if (found) {
        const now = Date.now();
        const expires = found.expiresAt ? new Date(found.expiresAt).getTime() : null;

        if (expires && now > expires) {
          status.textContent = "‚ùå Key ƒë√£ h·∫øt h·∫°n.";
          status.style.color = "red";
          localStorage.removeItem("savedKey");
          return;
        }

        validKey = inputKey;
        keyExpiresAt = expires;
        localStorage.setItem("savedKey", inputKey);
        status.textContent = "‚úÖ Key h·ª£p l·ªá! ƒêang v√†o menu...";
        status.style.color = "green";

        if (expires) startCountdown(); else expirationTimer.textContent = "";

        setTimeout(showGameMenu, 1000);
      } else {
        status.textContent = "‚ùå Key kh√¥ng h·ª£p l·ªá.";
        status.style.color = "red";
        localStorage.removeItem("savedKey");
      }
    } catch (e) {
      console.error(e);
      status.textContent = "‚ùå L·ªói khi ki·ªÉm tra key.";
      status.style.color = "red";
    }
  }

  function showGameMenu() {
    keyInputSection.style.display = "none";
    gameMenu.style.display = "block";
    status.textContent = "";
  }

  function openGame(num) {
    document.querySelectorAll(".game-div").forEach(div => div.style.display = "none");
    document.getElementById("game" + num).style.display = "block";
    gameTitle.textContent = `Game s·ªë ${num}`;
    gameContent.style.display = "block";
    gameMenu.style.display = "none";
  }

  backToMenuBtn.addEventListener("click", () => {
    gameContent.style.display = "none";
    gameMenu.style.display = "block";
    gameTitle.textContent = "";
  });

  function logout() {
    localStorage.removeItem("savedKey");
    validKey = null;
    keyExpiresAt = null;
    clearInterval(countdownInterval);
    expirationTimer.textContent = "";
    keyInputSection.style.display = "block";
    gameMenu.style.display = "none";
    gameContent.style.display = "none";
    userKeyInput.value = "";
    status.textContent = "";
  }

  function startCountdown() {
    clearInterval(countdownInterval);
    function update() {
      const diff = keyExpiresAt - Date.now();
      if (diff <= 0) {
        expirationTimer.textContent = "‚è∞ Key ƒë√£ h·∫øt h·∫°n!";
        expirationTimer.style.color = "red";
        logout();
      } else {
        const d = Math.floor(diff / (1000 * 60 * 60 * 24));
        const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
        const m = Math.floor((diff / (1000 * 60)) % 60);
        const s = Math.floor((diff / 1000) % 60);
        expirationTimer.textContent = `üïí C√≤n: ${d}d ${h}h ${m}m ${s}s`;
        expirationTimer.style.color = "#66ff99";
      }
    }
    update();
    countdownInterval = setInterval(update, 1000);
  }

  async function checkSavedKey(key) {
    try {
      const res = await fetch(githubKeysUrl + "?t=" + Date.now());
      const data = await res.json();
      const found = data.keys.find(k => k.key === key);

      if (found) {
        const now = Date.now();
        const expires = found.expiresAt ? new Date(found.expiresAt).getTime() : null;

        if (expires && now > expires) {
          logout();
          alert("Key ƒë√£ h·∫øt h·∫°n.");
        } else {
          validKey = key;
          keyExpiresAt = expires;
          if (expires) startCountdown();
          showGameMenu();
        }
      } else logout();
    } catch (e) {
      console.error(e);
      logout();
    }
  }

  window.onload = () => {
    const savedKey = localStorage.getItem("savedKey");
    if (savedKey) {
      userKeyInput.value = savedKey;
      checkSavedKey(savedKey);
    }
  };
</script>

</body>
</html>
