<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>V√†o game b·∫±ng key</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 600px;
    margin: 30px auto;
    text-align: center;
    background: #010;
    color: #cfc;
    position: relative;
  }
  input {
    padding: 10px;
    width: 80%;
    font-size: 16px;
    border: 2px solid #0c0;
    border-radius: 6px;
    background: #002200;
    color: #afa;
  }
  button {
    padding: 10px 20px;
    font-size: 16px;
    margin-top: 10px;
    cursor: pointer;
    background: #000;
    color: #0f0;
    border: 2px solid #0f0;
    border-radius: 6px;
    box-shadow:
      0 0 6px #0f0,
      inset 0 0 6px #0f0;
    transition: 0.3s;
  }
  button:hover {
    background: #0f0;
    color: #000;
    box-shadow:
      0 0 12px #0f0,
      inset 0 0 12px #0f0;
  }
  #status {
    margin-top: 20px;
    font-weight: bold;
  }
  .led-button {
    background: #000;
    color: #0f0;
    border: 2px solid #0f0;
    border-radius: 6px;
    box-shadow:
      0 0 8px #0f0,
      inset 0 0 8px #0f0;
    cursor: pointer;
    margin: 5px;
    padding: 10px 15px;
    font-weight: bold;
  }
  .led-button:hover {
    background: #0f0;
    color: #000;
    box-shadow:
      0 0 15px #0f0,
      inset 0 0 15px #0f0;
  }
  #gameMenu button {
    width: 45px;
    height: 45px;
    margin: 5px;
    font-weight: bold;
    font-size: 16px;
  }
  #gameContent {
    margin-top: 20px;
  }
  .game-div {
    display: none;
    margin-top: 10px;
    border: 2px solid #0f0;
    padding: 10px;
    border-radius: 8px;
    background: #002200cc;
  }
  .animated-text {
    animation: glow 2s infinite alternate;
  }
  @keyframes glow {
    from {
      text-shadow:
        0 0 5px #0f0,
        0 0 10px #0f0,
        0 0 20px #0f0,
        0 0 40px #0f0;
    }
    to {
      text-shadow:
        0 0 10px #0f0,
        0 0 20px #0f0,
        0 0 30px #0f0,
        0 0 50px #0f0;
    }
  }
  #note {
    margin-top: 15px;
    font-size: 14px;
    color: #afa;
    font-weight: bold;
    border: 2px solid #0f0;
    padding: 10px;
    border-radius: 8px;
    background: #002200cc;
  }
  #topLeftMenu {
    position: fixed;
    top: 10px;
    left: 10px;
  }
  #adminContact {
    display: none;
    margin-top: 10px;
    background: #003300cc;
    border: 2px solid #0f0;
    border-radius: 6px;
    padding: 10px;
  }
  #adminContact a {
    display: block;
    color: #0f0;
    text-decoration: none;
    margin: 5px 0;
  }
  #expirationTimer {
    font-weight: bold;
    margin-top: 10px;
    color: #0f0;
    text-shadow: 0 0 8px #0f0;
  }
</style>
</head>
<body>

<!-- Menu li√™n h·ªá admin g√≥c tr√™n tr√°i -->
<div id="topLeftMenu">
  <button class="led-button" id="toggleAdminBtn">‚ò∞ Menu Admin</button>
  <div id="adminContact">
    <a href="https://facebook.com/admin1" target="_blank">Admin 1 (Facebook)</a>
    <a href="https://facebook.com/admin2" target="_blank">Admin 2 (Facebook)</a>
    <a href="https://facebook.com/admin3" target="_blank">Admin 3 (Facebook)</a>
  </div>
</div>

<h2 class="animated-text">üéÆ V√†o game b·∫±ng key</h2>

<!-- Ph·∫ßn nh·∫≠p key -->
<div id="keyInputSection">
  <input type="text" id="userKey" placeholder="Nh·∫≠p key b·∫°n c√≥..." autocomplete="off" />
  <br />
  <button onclick="checkKey()">‚úÖ Ki·ªÉm tra key</button>
  <p id="status"></p>
  <p id="expirationTimer"></p>
</div>

<!-- Ph·∫ßn game menu -->
<div id="gameMenu" style="display:none;">
  <h3 class="animated-text">Ch·ªçn game b·∫°n mu·ªën ch∆°i</h3>
  <div>
    <!-- N√∫t game 1-10 -->
    <button class="led-button" onclick="openGame(1)">1</button>
    <button class="led-button" onclick="openGame(2)">2</button>
    <button class="led-button" onclick="openGame(3)">3</button>
    <button class="led-button" onclick="openGame(4)">4</button>
    <button class="led-button" onclick="openGame(5)">5</button>
    <button class="led-button" onclick="openGame(6)">6</button>
    <button class="led-button" onclick="openGame(7)">7</button>
    <button class="led-button" onclick="openGame(8)">8</button>
    <button class="led-button" onclick="openGame(9)">9</button>
    <button class="led-button" onclick="openGame(10)">10</button>
  </div>
  <button class="led-button" onclick="logout()">üö™ ƒêƒÉng xu·∫•t</button>
</div>

<!-- N·ªôi dung game (·∫©n m·∫∑c ƒë·ªãnh) -->
<div id="gameContent" style="display:none;">
  <h3 class="animated-text" id="gameTitle"></h3>

  <div id="game1" class="game-div">
    <p>N·ªôi dung Game 1 ·ªü ƒë√¢y</p>
  </div>
  <div id="game2" class="game-div">
    <p>N·ªôi dung Game 2 ·ªü ƒë√¢y</p>
  </div>
  <div id="game3" class="game-div">
    <p>N·ªôi dung Game 3 ·ªü ƒë√¢y</p>
  </div>
  <div id="game4" class="game-div">
    <p>N·ªôi dung Game 4 ·ªü ƒë√¢y</p>
  </div>
  <div id="game5" class="game-div">
    <p>N·ªôi dung Game 5 ·ªü ƒë√¢y</p>
  </div>
  <div id="game6" class="game-div">
    <p>N·ªôi dung Game 6 ·ªü ƒë√¢y</p>
  </div>
  <div id="game7" class="game-div">
    <p>N·ªôi dung Game 7 ·ªü ƒë√¢y</p>
  </div>
  <div id="game8" class="game-div">
    <p>N·ªôi dung Game 8 ·ªü ƒë√¢y</p>
  </div>
  <div id="game9" class="game-div">
    <p>N·ªôi dung Game 9 ·ªü ƒë√¢y</p>
  </div>
  <div id="game10" class="game-div">
    <p>N·ªôi dung Game 10 ·ªü ƒë√¢y</p>
  </div>

  <button class="led-button" id="backToMenuBtn">‚¨ÖÔ∏è Quay l·∫°i menu</button>
</div>

<!-- Ghi ch√∫ -->
<div id="note">
  ƒê√ÇY L√Ä TOOL ANH EM NH√Ä KV, KHUY·∫æN C√ÅO ANH EM ƒê·∫∂T C∆Ø·ª¢C √çT B·ªûI V√å TOOL KH√Å L·ªé N√äN ANH EM M·∫§T TI·ªÄN TH√å ƒê·ª™NG C√ì S·ª¶A ·∫≤NGGG !!!!!!!!
</div>

<script>
  const githubKeysUrl = "https://raw.githubusercontent.com/adminvienkey26109/trinhngocvientx/main/keys.json";

  const keyInputSection = document.getElementById("keyInputSection");
  const userKeyInput = document.getElementById("userKey");
  const status = document.getElementById("status");
  const expirationTimer = document.getElementById("expirationTimer");

  const gameMenu = document.getElementById("gameMenu");
  const gameContent = document.getElementById("gameContent");
  const gameTitle = document.getElementById("gameTitle");

  const backToMenuBtn = document.getElementById("backToMenuBtn");

  const adminContact = document.getElementById("adminContact");
  const toggleAdminBtn = document.getElementById("toggleAdminBtn");

  // Bi·∫øn l∆∞u tr·∫°ng th√°i key h·ª£p l·ªá + ng√†y h·∫øt h·∫°n
  let validKey = null;
  let keyExpiresAt = null;
  let countdownInterval = null;

  // Hi·ªán/·∫©n menu admin li√™n h·ªá
  toggleAdminBtn.addEventListener("click", () => {
    if (adminContact.style.display === "none" || adminContact.style.display === "") {
      adminContact.style.display = "block";
    } else {
      adminContact.style.display = "none";
    }
  });

  // Ki·ªÉm tra key l·∫•y t·ª´ GitHub v√† l∆∞u localStorage
  async function checkKey() {
    const inputKey = userKeyInput.value.trim();
    if (!inputKey) {
      status.style.color = "red";
      status.textContent = "‚ùå Vui l√≤ng nh·∫≠p key.";
      return;
    }
    status.style.color = "#0f0";
    status.textContent = "üîÑ ƒêang ki·ªÉm tra key...";

    try {
      const res = await fetch(githubKeysUrl + "?t=" + Date.now()); // tr√°nh cache
      const data = await res.json();

      // T√¨m key h·ª£p l·ªá trong data.keys, ki·ªÉm tra ng√†y h·∫øt h·∫°n
      if (data.keys && Array.isArray(data.keys)) {
        const found = data.keys.find(k => k.key === inputKey);
        if (found) {
          // Ki·ªÉm tra h·∫øt h·∫°n
          if (found.expiresAt) {
            const expires = new Date(found.expiresAt).getTime();
            const now = Date.now();
            if (now > expires) {
              status.style.color = "red";
              status.textContent = "‚ùå Key ƒë√£ h·∫øt h·∫°n v√† b·ªã ban.";
              localStorage.removeItem("savedKey");
              return;
            } else {
              keyExpiresAt = expires;
              startCountdown();
            }
          } else {
            // N·∫øu kh√¥ng c√≥ expiresAt th√¨ m·∫∑c ƒë·ªãnh v√¥ h·∫°n
            keyExpiresAt = null;
            expirationTimer.textContent = "";
            clearInterval(countdownInterval);
          }

          // Key h·ª£p l·ªá
          validKey = inputKey;
          localStorage.setItem("savedKey", inputKey);
          status.style.color = "green";
          status.textContent = "‚úÖ Key h·ª£p l·ªá! ƒêang v√†o menu...";
          setTimeout(() => {
            showGameMenu();
          }, 1000);
          return;
        }
      }

      status.style.color = "red";
      status.textContent = "‚ùå Key kh√¥ng h·ª£p l·ªá.";
      localStorage.removeItem("savedKey");
    } catch (e) {
      status.style.color = "red";
      status.textContent = "‚ùå L·ªói khi ki·ªÉm tra key.";
      console.error(e);
    }
  }

  // Hi·ªán menu game
  function showGameMenu() {
    keyInputSection.style.display = "none";
    status.textContent = "";
    expirationTimer.textContent = "";
    gameMenu.style.display = "block";
    gameContent.style.display = "none";
  }

  // M·ªü game theo s·ªë v√† hi·ªán div t∆∞∆°ng ·ª©ng
  function openGame(num) {
    // ·∫®n t·∫•t c·∫£ div game tr∆∞·ªõc
    document.querySelectorAll(".game-div").forEach(div => {
      div.style.display = "none";
    });

    const currentDiv = document.getElementById("game" + num);
    if (currentDiv) currentDiv.style.display = "block";

    gameTitle.textContent = `Game s·ªë ${num}`;
    gameContent.style.display = "block";
    gameMenu.style.display = "none";
  }

  // N√∫t quay l·∫°i menu
  backToMenuBtn.addEventListener("click", () => {
    gameContent.style.display = "none";
    gameMenu.style.display = "block";
    gameTitle.textContent = "";
    document.querySelectorAll(".game-div").forEach(div => {
      div.style.display = "none";
    });
  });

  // Logout (x√≥a key l∆∞u, quay l·∫°i nh·∫≠p key)
  function logout() {
    localStorage.removeItem("savedKey");
    validKey = null;
    keyExpiresAt = null;
    clearInterval(countdownInterval);
    expirationTimer.textContent = "";
    gameMenu.style.display = "none";
    gameContent.style.display = "none";
    keyInputSection.style.display = "block";
    status.textContent = "";
    userKeyInput.value = "";
  }

  // Ki·ªÉm tra n·∫øu c√≥ key ƒë√£ l∆∞u
  window.onload = () => {
    const savedKey = localStorage.getItem("savedKey");
    if (savedKey) {
      userKeyInput.value = savedKey;
      // T·ª± ƒë·ªông check key khi load trang (b·ªè qua th√¥ng b√°o check key)
      checkSavedKey(savedKey);
    }
  };

  // Ki·ªÉm tra key ƒë√£ l∆∞u khi load trang
  async function checkSavedKey(key) {
    try {
      const res = await fetch(githubKeysUrl + "?t=" + Date.now());
      const data = await res.json();

      if (data.keys && Array.isArray(data.keys)) {
        const found = data.keys.find(k => k.key === key);
        if (found) {
          // Ki·ªÉm tra h·∫øt h·∫°n
          if (found.expiresAt) {
            const expires = new Date(found.expiresAt).getTime();
            const now = Date.now();
            if (now > expires) {
              // H·∫øt h·∫°n
              logout();
              alert("Key b·∫°n ƒë√£ h·∫øt h·∫°n v√† b·ªã ban.");
              return;
            } else {
              keyExpiresAt = expires;
              startCountdown();
            }
          } else {
            keyExpiresAt = null;
            expirationTimer.textContent = "";
            clearInterval(countdownInterval);
          }

          validKey = key;
          showGameMenu();
          return;
        }
      }
      logout();
    } catch (e) {
      console.error(e);
      logout();
    }
  }

  // ƒê·∫øm ng∆∞·ª£c th·ªùi gian h·∫øt h·∫°n key
  function startCountdown() {
    if (!keyExpiresAt) {
      expirationTimer.textContent = "";
      clearInterval(countdownInterval);
      return;
    }
    clearInterval(countdownInterval);
    function updateTimer() {
      const now = Date.now();
      const diff = keyExpiresAt - now;
      if (diff <= 0) {
        expirationTimer.textContent = "‚è∞ Key ƒë√£ h·∫øt h·∫°n!";
        expirationTimer.style.color = "red";
        logout();
      } else {
        // ƒê·∫øm ng∆∞·ª£c th·ªùi gian theo ng√†y, gi·ªù, ph√∫t, gi√¢y
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
        const minutes = Math.floor((diff / (1000 * 60)) % 60);
        const seconds = Math.floor((diff / 1000) % 60);
        expirationTimer.textContent = `üïí Th·ªùi gian h·∫øt h·∫°n key c√≤n: ${days}d ${hours}h ${minutes}m ${seconds}s`;
        expirationTimer.style.color = "#0f0";
        expirationTimer.style.textShadow = "0 0 6px #0f0, 0 0 10px #0f0";
      }
    }
    updateTimer();
    countdownInterval = setInterval(updateTimer, 1000);
  }
</script>

</body>
</html>
