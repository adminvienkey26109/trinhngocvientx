<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Nh·∫≠p key ƒë·ªÉ v√†o game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 30px auto;
      text-align: center;
      background: url('https://i.imgur.com/1JdFvXb.jpg') no-repeat center center fixed;
      background-size: cover;
      color: white;
    }
    input {
      padding: 10px;
      width: 80%;
      font-size: 16px;
      border-radius: 6px;
      border: none;
      margin-bottom: 10px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin: 5px;
      cursor: pointer;
      border-radius: 6px;
      border: 2px solid #1abc9c;
      background: transparent;
      color: #1abc9c;
      font-weight: bold;
      transition: all 0.3s ease;
      text-shadow: 0 0 5px #1abc9c;
    }
    button:hover {
      background-color: #1abc9c;
      color: #fff;
      text-shadow: none;
      box-shadow: 0 0 8px #16a085;
    }
    #status {
      margin-top: 20px;
      font-weight: bold;
      font-size: 18px;
      text-shadow: 0 0 5px #000;
    }
    #gameMenu {
      margin-top: 30px;
      display: none;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      flex-direction: column;
      align-items: center;
    }
    .game-btn {
      border: 2px solid #1abc9c;
      color: #1abc9c;
      padding: 10px 15px;
      border-radius: 10px;
      font-weight: bold;
      width: 100px;
      box-shadow: 0 0 8px #16a085;
      cursor: pointer;
      transition: 0.3s;
      user-select: none;
      position: relative;
      overflow: hidden;
      margin: 5px;
    }
    .game-btn::before {
      content: '';
      position: absolute;
      width: 150%;
      height: 150%;
      background: linear-gradient(45deg, transparent, #1abc9c, transparent);
      animation: ledEffect 3s linear infinite;
      top: -50%;
      left: -50%;
      opacity: 0.6;
      border-radius: 10px;
      pointer-events: none;
      z-index: 0;
    }
    .game-btn span {
      position: relative;
      z-index: 1;
      text-shadow: 0 0 10px #1abc9c;
    }
    @keyframes ledEffect {
      0% {
        transform: rotate(0deg) translateX(-100%);
      }
      100% {
        transform: rotate(360deg) translateX(100%);
      }
    }
    #logoutBtn {
      margin-top: 15px;
      display: none;
      background-color: #e74c3c;
      border-color: #c0392b;
      color: white;
      box-shadow: none;
      text-shadow: none;
      padding: 10px 25px;
    }
    #logoutBtn:hover {
      background-color: #c0392b;
    }
    #adminMenuBtn {
      position: fixed;
      top: 15px;
      left: 15px;
      background: #1abc9c;
      border: none;
      border-radius: 6px;
      padding: 8px 12px;
      cursor: pointer;
      font-weight: bold;
      color: white;
      box-shadow: 0 0 10px #16a085;
      z-index: 1000;
    }
    #adminContacts {
      position: fixed;
      top: 50px;
      left: 15px;
      background: rgba(26, 188, 156, 0.9);
      border-radius: 10px;
      padding: 10px;
      display: none;
      z-index: 999;
      width: 200px;
      text-align: left;
      box-shadow: 0 0 15px #16a085;
    }
    #adminContacts a {
      display: block;
      color: white;
      margin: 5px 0;
      font-weight: bold;
      text-decoration: none;
      text-shadow: 0 0 3px black;
    }
    #note {
      margin-top: 40px;
      font-size: 14px;
      background: rgba(0,0,0,0.5);
      padding: 15px;
      border-radius: 10px;
      line-height: 1.4;
      font-weight: bold;
      color: #f1c40f;
      text-shadow: 0 0 5px black;
      user-select: none;
    }
    .countdown {
      font-weight: bold;
      font-size: 20px;
      margin-top: 15px;
      color: #1abc9c;
      text-shadow: 0 0 10px #16a085;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%, 100% { text-shadow: 0 0 10px #16a085; }
      50% { text-shadow: 0 0 20px #1abc9c; }
    }
    #gameContent {
      margin-top: 25px;
      padding: 15px;
      background: rgba(0,0,0,0.6);
      border-radius: 12px;
      max-height: 300px;
      overflow-y: auto;
      text-align: left;
      font-family: monospace;
      white-space: pre-wrap;
      color: #0f0;
      box-shadow: 0 0 10px #16a085;
      user-select: text;
      width: 100%;
      max-width: 600px;
    }
  </style>
</head>
<body>

<button id="adminMenuBtn" onclick="toggleAdminContacts()">Menu Admin</button>
<div id="adminContacts">
  <a href="https://facebook.com/admin1" target="_blank">Admin 1</a>
  <a href="https://facebook.com/admin2" target="_blank">Admin 2</a>
  <a href="https://facebook.com/admin3" target="_blank">Admin 3</a>
</div>

<h2>üéÆ V√†o game b·∫±ng key</h2>
<p>Nh·∫≠p key ƒë·ªÉ k√≠ch ho·∫°t, ho·∫∑c b·∫°n ƒë√£ ƒëƒÉng nh·∫≠p r·ªìi.</p>
<input type="text" id="userKey" placeholder="Nh·∫≠p key b·∫°n c√≥..."><br>
<button onclick="checkKey()">‚úÖ Ki·ªÉm tra key</button>
<p id="status"></p>

<!-- Game Menu -->
<div id="gameMenu" style="display:none; flex-direction: column; align-items:center;">
  <h3>Ch·ªçn game b·∫°n mu·ªën ch∆°i:</h3>
  <div id="gamesButtons" style="display:flex; flex-wrap: wrap; justify-content:center; max-width:600px;"></div>
  <p id="countdown" class="countdown"></p>
  <button id="logoutBtn" onclick="logout()">üö™ ƒêƒÉng xu·∫•t</button>

  <!-- Div hi·ªÉn th·ªã code HTML + script game -->
  <div id="gameContent" style="display:none;"></div>
</div>

<!-- Note -->
<div id="note">
  ƒê√ÇY L√Ä TOOL ANH EM NH√Ä KV, KHUY·∫æN C√ÅO ANH EM ƒê·∫∂T C∆Ø·ª¢C √çT B·ªûI V√å TOOL KH√Å L·ªé N√äN ANH EM M·∫§T TI·ªÄN TH√å ƒê·ª™NG C√ì S·ª¶A ·∫≤NGGG !!!!!!!!
</div>

<script>
  const keysURL = "https://raw.githubusercontent.com/adminvienkey26109/trinhngocvientx/refs/heads/main/keys.json";

  // N·ªôi dung HTML + Script v√≠ d·ª• cho game 1-10
  const htmlSources = {
    1: `<div><h4>Game 1</h4><p>ƒê√¢y l√† n·ªôi dung demo game 1.</p><script>console.log("Script Game 1 ch·∫°y!");<\/script></div>`,
    2: `<div><h4>Game 2</h4><p>Game 2 vui v·∫ª nh√©!</p><script>console.log("Script Game 2 ch·∫°y!");<\/script></div>`,
    3: `<div><h4>Game 3</h4><p>N·ªôi dung game 3 ƒë∆°n gi·∫£n.</p><script>console.log("Script Game 3 ch·∫°y!");<\/script></div>`,
    4: `<div><h4>Game 4</h4><p>N·ªôi dung game 4.</p></div>`,
    5: `<div><h4>Game 5</h4><p>N·ªôi dung game 5.</p></div>`,
    6: `<div><h4>Game 6</h4><p>N·ªôi dung game 6.</p></div>`,
    7: `<div><h4>Game 7</h4><p>N·ªôi dung game 7.</p></div>`,
    8: `<div><h4>Game 8</h4><p>N·ªôi dung game 8.</p></div>`,
    9: `<div><h4>Game 9</h4><p>N·ªôi dung game 9.</p></div>`,
    10:`<div><h4>Game 10</h4><p>N·ªôi dung game 10.</p></div>`
  };

  const status = document.getElementById("status");
  const gameMenu = document.getElementById("gameMenu");
  const gamesButtons = document.getElementById("gamesButtons");
  const logoutBtn = document.getElementById("logoutBtn");
  const countdownElem = document.getElementById("countdown");
  const userKeyInput = document.getElementById("userKey");
  const gameContent = document.getElementById("gameContent");
  let countdownInterval = null;
  let currentKeyExpire = null;

  // T·∫°o n√∫t game 1-10
  function createGameButtons() {
    gamesButtons.innerHTML = "";
    for(let i=1; i<=10; i++) {
      const btn = document.createElement("button");
      btn.className = "game-btn";
      btn.innerHTML = `<span>Game ${i}</span>`;
      btn.onclick = () => loadGameContent(i);
      gamesButtons.appendChild(btn);
    }
  }

  function loadGameContent(gameNum) {
    // Hi·ªÉn th·ªã n·ªôi dung game, c·∫ßn ch·∫°y script ƒë√∫ng c√°ch
    const html = htmlSources[gameNum] || "<p>Ch∆∞a c√≥ n·ªôi dung game n√†y.</p>";
    // ƒê·ªÉ script ch·∫°y, ta t·∫°o temp div r·ªìi clone v√†o gameContent
    gameContent.style.display = "block";
    gameContent.innerHTML = ""; // X√≥a c≈©
    const temp = document.createElement("div");
    temp.innerHTML = html;
    gameContent.appendChild(temp);

    // Th·ª±c thi c√°c th·∫ª <script> b√™n trong n·ªôi dung game
    const scripts = temp.querySelectorAll("script");
    scripts.forEach(oldScript => {
      const newScript = document.createElement("script");
      if(oldScript.src){
        newScript.src = oldScript.src;
      } else {
        newScript.textContent = oldScript.textContent;
      }
      document.body.appendChild(newScript);
      document.body.removeChild(newScript);
    });
  }

  // Hi·ªÉn th·ªã ho·∫∑c ·∫©n admin contact
  function toggleAdminContacts() {
    const cont = document.getElementById("adminContacts");
    cont.style.display = (cont.style.display === "block") ? "none" : "block";
  }

  // Ki·ªÉm tra key h·ª£p l·ªá v√† th·ªùi h·∫°n key
  async function checkKey() {
    const key = userKeyInput.value.trim();
    if(!key) {
      status.style.color = "red";
      status.textContent = "Vui l√≤ng nh·∫≠p key!";
      return;
    }
    status.style.color = "#1abc9c";
    status.textContent = "ƒêang ki·ªÉm tra key...";
    try {
      const res = await fetch(keysURL + "?t=" + Date.now());
      if(!res.ok) throw new Error("Kh√¥ng t·∫£i ƒë∆∞·ª£c file keys.json");
      const keysData = await res.json();

      // T√¨m key trong keysData, gi·∫£ s·ª≠ keysData l√† m·∫£ng ho·∫∑c object
      // V√≠ d·ª• keysData: [{key:"xxx", expiresAt: "2025-06-12T15:30:00Z"}, ...]
      const foundKeyObj = (Array.isArray(keysData) ? keysData : Object.values(keysData))
        .find(k => k.key === key);

      if(!foundKeyObj) {
        status.style.color = "red";
        status.textContent = "Key kh√¥ng h·ª£p l·ªá!";
        return;
      }
      if(foundKeyObj.expiresAt) {
        const expireDate = new Date(foundKeyObj.expiresAt);
        if(expireDate < new Date()) {
          status.style.color = "red";
          status.textContent = "Key ƒë√£ h·∫øt h·∫°n!";
          return;
        }
        currentKeyExpire = expireDate;
        startCountdown();
      } else {
        currentKeyExpire = null;
        countdownElem.textContent = "";
      }

      status.style.color = "#1abc9c";
      status.textContent = "Key h·ª£p l·ªá! B·∫°n ƒë√£ ƒëƒÉng nh·∫≠p th√†nh c√¥ng.";
      userKeyInput.disabled = true;
      gameMenu.style.display = "flex";
      logoutBtn.style.display = "inline-block";
      createGameButtons();

    } catch(e) {
      status.style.color = "red";
      status.textContent = "L·ªói ki·ªÉm tra key: " + e.message;
    }
  }

  function logout() {
    userKeyInput.value = "";
    userKeyInput.disabled = false;
    status.textContent = "";
    gameMenu.style.display = "none";
    logoutBtn.style.display = "none";
    countdownElem.textContent = "";
    currentKeyExpire = null;
    clearInterval(countdownInterval);
    gameContent.style.display = "none";
    gameContent.innerHTML = "";
  }

  // H√†m ƒë·∫øm ng∆∞·ª£c th·ªùi gian h·∫øt h·∫°n key
  function startCountdown() {
    if(!currentKeyExpire) {
      countdownElem.textContent = "";
      return;
    }
    clearInterval(countdownInterval);
    function updateCountdown() {
      const now = new Date();
      let diff = currentKeyExpire - now;
      if(diff <= 0) {
        countdownElem.textContent = "Key ƒë√£ h·∫øt h·∫°n!";
        logout();
        return;
      }
      const hours = Math.floor(diff / (1000*60*60));
      diff -= hours * 1000*60*60;
      const minutes = Math.floor(diff / (1000*60));
      diff -= minutes * 1000*60;
      const seconds = Math.floor(diff / 1000);
      countdownElem.textContent = `Th·ªùi gian c√≤n l·∫°i: ${hours}h ${minutes}p ${seconds}s`;
    }
    updateCountdown();
    countdownInterval = setInterval(updateCountdown, 1000);
  }

  
</script>

</body>
</html>
